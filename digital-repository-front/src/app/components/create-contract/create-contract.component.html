<div class="form-contract">
  <mat-stepper class="flex flex-col start-menu-bg px-20 py-10 border-blue items-center">
    <mat-step label="Datos del contrato">
      <div>
        <div class="boxContainerForm">
          <form [formGroup]="myForm" (ngSubmit)="submitFormulario()" id="formregistro">
            <p>Complete la información del nuevo contrato que desea digitalizar</p>
            <br>
            <p>Radicado</p>
            <div class="grid-radicado">
              <div class="radicado"><i-lucide name="ScrollText"></i-lucide>
                <h1>{{radicado}}</h1>
              </div>
              <div>
                <select class="form-control" formControlName="ncContractType" (change)="loadRadicado()"
                  [class.is-invalid]="ncContractTypeInvalid">
                  <option selected disabled>Tipo de Contrato...</option>
                  <option *ngFor="let contractsType of contractsType" [value]="contractsType.externalCode">
                    {{contractsType.name}}</option>
                </select>
                <small *ngIf="ncContractTypeInvalid">Tipo de Contrato Invalido</small>
                &nbsp;/
              </div>

              <div>
                <input class="form-control" (input)="loadRadicado()" formControlName="ncNroContract"
                  name="ncNroContract" [class.is-invalid]="ncNroContractInvalid" placeholder="Número de Contrato"
                  style="background-color:transparent">
                <small *ngIf="ncNroContractInvalid">Número de Contrato Invalido</small>
              </div>
            </div>
            <br />
            <div class="grid-contratista">
              <div>
                <br />
                ID Contratista
                <input class="form-control" type="text" style="background-color:transparent" formControlName="ncVendor"
                  [class.is-invalid]="ncVendorInvalid" placeholder="ID Contratista">
                <small *ngIf="ncVendorInvalid">ID de contratista Invalido</small>
              </div>
              <div>
                <br />
                <p>Fecha de Expedición</p>
                <input class="form-control" type="date" [class.is-invalid]="ncInitialDateInvalid"
                  style="background-color:transparent" formControlName="ncInitialDate" placeholder="Día/Mes/Año">
                <small *ngIf="ncInitialDateInvalid">No ha seleccionado una fecha</small>
              </div>

              <div class="grid">
                <br />
                <p>Modalidad</p>
                <select class="" class="  form-control" formControlName="ncModalityType"
                  [class.is-invalid]="ncModalityTypeInvalid">
                  <option selected disabled>Modalidad...</option> ncModalityTypeInvalid
                  <option *ngFor="let modalityType of modalityType" [value]="modalityType.id">{{modalityType.name}}
                  </option>
                </select>
                <small *ngIf="ncModalityTypeInvalid">No ha seleccionado la modalidad</small>
              </div>
              <div>
                <br />
                <p>Objeto del Contrato</p>

                <textarea class="form-control" formControlName="ncSubject" rows="6" cols="80"
                  placeholder="Objeto o Finalidad del Contrato" [class.is-invalid]="ncSubjectInvalid"></textarea>
                <small *ngIf="ncSubjectInvalid">No ha seleccionado la modalidad</small>


              </div>
              <br />
            </div>
          </form>
        </div>
        <div>
          <button (click)="submitFormulario()" type="submit">Continuar<i-lucide name="ChevronRight"></i-lucide></button>

          <pre>
            Estado Formulario:{{myForm.valid}}
          </pre>

          <pre>
          Status:{{myForm.status}}
        </pre>

          <pre>
          {{myForm.value | json}}
        </pre>
        </div>
      </div>
    </mat-step>
    <mat-step label="Subir Documentos">
      <div class="barra">
        <div class="columna">Nombre</div>
        <div class="columna">Tipo de documento</div>
        <div class="columna">Fecha de expedición</div>
      </div>
      <div class="contenedor-acordeon">
        <mat-accordion [multi]="true">
          <mat-expansion-panel class="linea-blanca-panel">
            <mat-expansion-panel-header>
              <mat-panel-title class="titulo-acordeon">
                <span class="etiqueta">Etapa precontractual</span>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-panel-description>
              <mat-accordion [multi]="true" class="acordeonEtapaPrecontractual" #acordeon>
                <mat-expansion-panel class="linea-blanca-panel" [expanded]="acordeonAbierto">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <div class="barraInvitacion">
                        <span class="etiqueta">Invitación a cotizar</span>
                      </div>
                    </mat-panel-title>
                    <button mat-icon-button color="primary" class="add-button"
                      (click)="$event.stopPropagation(); abrirVentanaEmergente()">
                      <i-lucide name="FilePlus"></i-lucide>
                    </button>
                  </mat-expansion-panel-header>
                  <mat-panel-description #dialog class="acordeonIC" *ngIf="filas.length > 0">
                    <mat-panel-title class="lineaDocumentos" *ngFor="let fila of filas; let i = index">
                      <div class="barraDocumentos">
                        <div class="columnaDocs">
                          {{ fila.nombreDocumento }}
                        </div>
                        <div class="columnaDocs">{{ fila.tipoDocumento }}</div>
                        <div class="columnaDocs">{{ fila.fechaExpedicion }}</div>
                        <div class="botones-container">
                          <button class="boton-crear">
                            <i-lucide class="custom-icon" name="FileUp"></i-lucide>
                          </button>
                          <button class="boton-editar" (click)="abrirVentanaEmergenteEdit()">
                            <i-lucide name="FileEdit"></i-lucide>
                          </button>
                          <button class="boton-borrar" (click)="openDialog('0ms', '0ms')">
                            <i-lucide name="FileDown"></i-lucide>
                          </button>
                        </div>
                      </div>
                    </mat-panel-title>
                  </mat-panel-description>
                  

                </mat-expansion-panel>
                <mat-expansion-panel class="linea-blanca-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <div class="barraEstudiosPrevios">
                        <span class="etiqueta">Estudios previos</span>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-panel-description>
                    Contenido del acordeón "Estudios previos"
                  </mat-panel-description>
                </mat-expansion-panel>
                <mat-expansion-panel class="linea-blanca-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <div class="barraCertificadoPresupuestal">
                        <span class="etiqueta">Certificado de disponibilidad presupuestal</span>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-panel-description>
                    Contenido del acordeón "Certificado de disponibilidad
                    presupuestal"
                  </mat-panel-description>
                </mat-expansion-panel>
              </mat-accordion>
            </mat-panel-description>
          </mat-expansion-panel>

          <mat-expansion-panel class="linea-blanca-panel">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <span class="etiqueta">Etapa contractual</span>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-panel-description>
              <mat-accordion [multi]="true" class="acordeonEtapaContractual">
                <mat-expansion-panel class="linea-blanca-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <div class="barraInvitacion">
                        <span class="etiqueta">Contrato</span>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-panel-description>
                    Contenido del acordeón "Contrato"
                  </mat-panel-description>
                </mat-expansion-panel>
                <mat-expansion-panel class="linea-blanca-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <div class="barraEstudiosPrevios">
                        <span class="etiqueta">Cronograma</span>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-panel-description>
                    Contenido del acordeón "Cronograma"
                  </mat-panel-description>
                </mat-expansion-panel>
                <mat-expansion-panel class="linea-blanca-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <div class="barraPoliza">
                        <span class="etiqueta">Poliza</span>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-panel-description>
                    Contenido del acordeón "Poliza"
                  </mat-panel-description>
                </mat-expansion-panel>
                <mat-expansion-panel class="linea-blanca-panel">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <div class="barraRegistroPresupuestal">
                        <span class="etiqueta">Registro Presupuestal</span>
                      </div>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-panel-description>
                    Contenido del acordeón "Registro Presupuestal"
                  </mat-panel-description>
                </mat-expansion-panel>
              </mat-accordion>
            </mat-panel-description>
          </mat-expansion-panel>

          <mat-expansion-panel class="linea-blanca-panel">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <span class="etiqueta">Etapa postcontractual</span>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-panel-description>
              <mat-accordion [multi]="true" class="acordeonEtapaPostcontractual">
              </mat-accordion>
            </mat-panel-description>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
      <div class="uniButton">
        <button class="back-button" matStepperPrevious>
          <i-lucide name="ChevronLeft"></i-lucide>Regresar
        </button>
        <button class="next-button" matStepperNext>
          Continuar<i-lucide name="ChevronRight"></i-lucide>
        </button>
      </div>
    </mat-step>
  </mat-stepper>
</div>